name: Run tModUnpacker

on:
  workflow_dispatch:

jobs:
  run-tmodunpacker:
    runs-on: windows-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
    
    - name: Set up environment
      run: |
        chmod +x input.sh
        . ./input.sh
        echo "TMODFILE=$TMODFILE" >> $GITHUB_ENV

    - name: Create directories if they don't exist
      run: |
        mkdir -p tmodFilesExtracted/$TMODFILE/

    - name: Run tModUnpacker
      run: |
        ./tModUnpacker.exe tmodFiles/$TMODFILE tmodFilesExtracted/$TMODFILE/
